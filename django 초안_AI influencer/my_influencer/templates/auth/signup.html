{% extends 'base.html' %}

{% block title %}회원가입 - SERA{% endblock %}

{% block content %}
<div class="signup-container" style="max-width: 500px; margin: 30px auto; padding: 40px; background: white; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
    <h2 style="text-align: center; color: #ff1493; margin-bottom: 40px; font-size: 1.8em;">회원가입</h2>
    
    <form method="post" enctype="multipart/form-data" style="display: flex; flex-direction: column; gap: 20px;">
        {% csrf_token %}
        
        <div style="margin-bottom: 10px;">
            <label for="username" style="display: block; margin-bottom: 8px; color: #666; font-weight: 500;">
                아이디 <span style="color: #ff1493;">*</span>
            </label>
            <input type="text" id="username" name="username" required 
                   style="width: 100%; padding: 15px; border: 2px solid #ffb6c1; border-radius: 10px; 
                          font-size: 16px; box-sizing: border-box;"
                   placeholder="영문, 숫자 조합 4-20자">
        </div>
        
        <div style="margin-bottom: 10px;">
            <label for="password" style="display: block; margin-bottom: 8px; color: #666; font-weight: 500;">
                비밀번호 <span style="color: #ff1493;">*</span>
            </label>
            <input type="password" id="password" name="password" required 
                   style="width: 100%; padding: 15px; border: 2px solid #ffb6c1; border-radius: 10px; 
                          font-size: 16px; box-sizing: border-box;"
                   placeholder="6자 이상 입력해주세요">
        </div>
        
        <div style="margin-bottom: 10px;">
            <label for="password_confirm" style="display: block; margin-bottom: 8px; color: #666; font-weight: 500;">
                비밀번호 확인 <span style="color: #ff1493;">*</span>
            </label>
            <input type="password" id="password_confirm" name="password_confirm" required 
                   style="width: 100%; padding: 15px; border: 2px solid #ffb6c1; border-radius: 10px; 
                          font-size: 16px; box-sizing: border-box;"
                   placeholder="비밀번호를 다시 입력해주세요">
        </div>
        
        <div style="margin-bottom: 10px;">
            <label for="first_name" style="display: block; margin-bottom: 8px; color: #666; font-weight: 500;">
                이름 <span style="color: #ff1493;">*</span>
            </label>
            <input type="text" id="first_name" name="first_name" required 
                   style="width: 100%; padding: 15px; border: 2px solid #ffb6c1; border-radius: 10px; 
                          font-size: 16px; box-sizing: border-box;"
                   placeholder="실명을 입력해주세요">
        </div>
        
        <div style="margin-bottom: 10px;">
            <label for="email" style="display: block; margin-bottom: 8px; color: #666; font-weight: 500;">
                이메일 <span style="color: #ff1493;">*</span>
            </label>
            <input type="email" id="email" name="email" required 
                   style="width: 100%; padding: 15px; border: 2px solid #ffb6c1; border-radius: 10px; 
                          font-size: 16px; box-sizing: border-box;"
                   placeholder="example@email.com">
        </div>
        
        <div style="margin-bottom: 10px;">
            <label for="address" style="display: block; margin-bottom: 8px; color: #666; font-weight: 500;">
                주소
            </label>
            <input type="text" id="address" name="address" 
                   style="width: 100%; padding: 15px; border: 2px solid #ffb6c1; border-radius: 10px; 
                          font-size: 16px; box-sizing: border-box;"
                   placeholder="주소를 입력해주세요 (선택사항)">
        </div>
        
        <div style="margin-bottom: 10px;">
            <label for="profile_image" style="display: block; margin-bottom: 8px; color: #666; font-weight: 500;">
                프로필 이미지 (선택사항)
            </label>
            <div style="position: relative;">
                <input type="file" id="profile_image" name="profile_image" accept="image/*"
                       style="width: 100%; padding: 15px; border: 2px solid #ffb6c1; border-radius: 10px; 
                              font-size: 16px; box-sizing: border-box; background: white;">
                <small style="color: #999; font-size: 12px; margin-top: 5px; display: block;">
                    JPG, PNG 파일만 업로드 가능 (최대 5MB)
                </small>
            </div>
        </div>
        
        <button type="submit" 
                style="width: 100%; padding: 18px; background: linear-gradient(45deg, #ff69b4, #ff1493); 
                       color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: 600; 
                       cursor: pointer; transition: all 0.3s ease; margin-top: 20px;">
            회원가입
        </button>
    </form>
    
    <div style="text-align: center; margin-top: 30px; color: #666;">
        <p style="margin-bottom: 15px;">이미 계정이 있으신가요? <a href="/login/" style="color: #ff1493; text-decoration: none; font-weight: 500;">로그인</a></p>
    </div>
    
    <div style="text-align: center; margin-top: 20px;">
        <a href="/" style="color: #999; text-decoration: none; font-size: 14px; padding: 10px;">← 홈으로 돌아가기</a>
    </div>
</div>

<style>
    button:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(255, 105, 180, 0.4);
    }
    
    input:focus {
        outline: none;
        border-color: #ff69b4;
        box-shadow: 0 0 0 3px rgba(255, 105, 180, 0.1);
        transform: scale(1.01);
    }
    
    input:hover {
        border-color: #ff69b4;
    }
    
    .signup-container {
        animation: fadeInUp 0.6s ease-out;
    }
    
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    /* 파일 업로드 스타일링 */
    input[type="file"]::-webkit-file-upload-button {
        background: linear-gradient(45deg, #ff69b4, #ff1493);
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        cursor: pointer;
        margin-right: 10px;
        font-weight: 500;
    }
    
    input[type="file"]::-webkit-file-upload-button:hover {
        background: linear-gradient(45deg, #ff1493, #dc143c);
    }
    
    /* 필수 항목 표시 */
    span[style*="color: #ff1493"] {
        font-size: 14px;
    }
    
    /* 반응형 디자인 */
    @media (max-width: 768px) {
        .signup-container {
            margin: 10px;
            padding: 20px;
        }
        
        h2 {
            font-size: 1.5em !important;
        }
        
        input, button {
            padding: 12px !important;
            font-size: 14px !important;
        }
    }
</style>

<script>
    // 폼 유효성 검사
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.querySelector('form');
        const password = document.getElementById('password');
        const passwordConfirm = document.getElementById('password_confirm');
        const username = document.getElementById('username');
        const email = document.getElementById('email');

        // 비밀번호 확인 실시간 검사
        passwordConfirm.addEventListener('input', function() {
            if (password.value !== passwordConfirm.value) {
                passwordConfirm.style.borderColor = '#ff6b6b';
                passwordConfirm.style.boxShadow = '0 0 0 3px rgba(255, 107, 107, 0.1)';
            } else {
                passwordConfirm.style.borderColor = '#4ecdc4';
                passwordConfirm.style.boxShadow = '0 0 0 3px rgba(78, 205, 196, 0.1)';
            }
        });

        // 비밀번호 길이 검사
        password.addEventListener('input', function() {
            if (password.value.length < 6 && password.value.length > 0) {
                password.style.borderColor = '#ff6b6b';
                password.style.boxShadow = '0 0 0 3px rgba(255, 107, 107, 0.1)';
            } else if (password.value.length >= 6) {
                password.style.borderColor = '#4ecdc4';
                password.style.boxShadow = '0 0 0 3px rgba(78, 205, 196, 0.1)';
            }
        });

        // 폼 제출 시 최종 검사
        form.addEventListener('submit', function(e) {
            let isValid = true;
            let errorMessage = '';

            // 필수 필드 검사
            const requiredFields = [username, password, passwordConfirm,
                                  document.getElementById('first_name'), email];

            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.style.borderColor = '#ff6b6b';
                    isValid = false;
                }
            });

            // 비밀번호 일치 검사
            if (password.value !== passwordConfirm.value) {
                errorMessage = '비밀번호가 일치하지 않습니다.';
                isValid = false;
            }

            // 비밀번호 길이 검사
            if (password.value.length < 6) {
                errorMessage = '비밀번호는 6자 이상이어야 합니다.';
                isValid = false;
            }

            // 이메일 형식 검사
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email.value)) {
                errorMessage = '올바른 이메일 형식을 입력해주세요.';
                isValid = false;
            }

            if (!isValid) {
                e.preventDefault();
                if (errorMessage) {
                    alert(errorMessage);
                } else {
                    alert('필수 항목을 모두 입력해주세요.');
                }
            }
        });

        // 파일 업로드 크기 제한
        const fileInput = document.getElementById('profile_image');
        fileInput.addEventListener('change', function() {
            const file = this.files[0];
            if (file) {
                const maxSize = 5 * 1024 * 1024; // 5MB
                if (file.size > maxSize) {
                    alert('파일 크기는 5MB 이하여야 합니다.');
                    this.value = '';
                }
            }
        });
    });
</script>
{% endblock %}
